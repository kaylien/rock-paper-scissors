<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Function scope example</title>
</head>
<body>
	<p id="p1">Click play game!</p>
	<div> 
		<button id="0" type="button">Rock</button>
		<button id="1" type="button">Paper</button>
		<button id="2" type="button">Scissors</button>
		<button id="3" onclick="showGame()" type="button">Play Game</button>
	</div>

  <script>
  	var roundsLeft = 5;
	var resultOfRound = 0;

  	const buttons = document.getElementsByTagName('button');
  	console.log(buttons);

  	const rock_button = document.getElementById("0");
  	const paper_button = document.getElementById("1");
  	const scissors_button = document.getElementById("2");
	const game_button = document.getElementById("3");


  	game_button.addEventListener('click', game);


  	for (var i = 0; i < 3; i++) {
  		buttons[i].style.display = "none";
  	}


  	function showGame() {
  		var x = document.getElementById("0");

  		if (x.style.display === "none") {
       		 x.style.display = "inline";
    	} 
    	else {
        x.style.display = "none";
   		}

   		for (var i = 0; i < 3; i++) {
  			if (buttons[i].style.display = "none") {
  				buttons[i].style.display = "inline";
  			}
  			else {
  				buttons[i].style.display = "none";
  			}
  		}

  		buttons[3].style.display = "none";
  	}

  	function logButton(e) {


  		//var player = e.target.id;
  		var playerAnswer = e.target.textContent;
  		//var general = e.path[0];
  		var computerAnswer = computerPlay();

  		//console.log(playerAnswer);
  		//console.log(computerAnswer);



  		resultOfRound += playRound(playerAnswer, computerAnswer);
  		roundsLeft -= 1;
  		document.getElementById("p1").innerHTML = roundsLeft + " turns left!";
  		game();

  	}

  	function caseInsensitive(str) {
  		var lowercaseStr = str.slice(1).toLowerCase();
    	var capitalized = str.charAt(0).toUpperCase() + lowercaseStr;
    	return capitalized;
  	}

  	function computerPlay() {
		var choice = Math.floor(Math.random() * 3);
	
		switch (choice) {
		case 0:
			return "Rock";
			break;
		case 1:
			return "Paper";
			break;
		case 2:
			return "Scissors";
			break;
		default:
			console.log("Computer didn't pick");
			}
	}

	function playRound(player, computer) {
		var playerAnswer = caseInsensitive(player);

		if (playerAnswer == computer) {
			console.log("It's a tie! You both played " + playerAnswer);
			//console.log("0");
			return 0;
		}
		else if ((playerAnswer == "Rock" & computer == "Paper") ||
				 (playerAnswer == "Paper" & computer == "Scissors") ||
				 (playerAnswer == "Scissors" & computer == "Rock")) {
			console.log("You lose! " + computer + " beats " + playerAnswer + "!");
			//console.log("-1");
			return -1;
		}
		else {
			console.log("You win! " + playerAnswer + " beats " + computer + "!");
			//console.log("1");
			return 1;
		}
	}

	function game() {

		//alert("Rock, paper, or scissors?");

		//for (button in buttons)
		
		rock_button.addEventListener('click', logButton);
  		paper_button.addEventListener('click', logButton);
  		scissors_button.addEventListener('click', logButton);
  		
  		if(roundsLeft == 0) {
			if (resultOfRound == 0) {
				document.getElementById("p1").innerHTML = "It's a tie!!";
			}

			else if (resultOfRound < 0) {
				document.getElementById("p1").innerHTML = "You lost big time, buddy!!";
			}

			else {
				document.getElementById("p1").innerHTML = "Hohoho you win!";
			}
		}
	}
  </script>
</body>
</html>